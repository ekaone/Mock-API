(this.webpackJsonptutorial=this.webpackJsonptutorial||[]).push([[0],{53:function(e,t,a){e.exports=a(77)},77:function(e,t,a){"use strict";a.r(t);a(54);var n=a(0),r=a.n(n),l=a(41),i=a.n(l),c=a(1),o=a(37),s=a(52),m=a(8),d=a(14);function u(e){var t,a=e.className,n=void 0===a?"":a,l=e.inactiveClassName,i=void 0===l?"":l,o=e.activeClassName,s=void 0===o?"":o,m=e.to,u=e.exact,f=void 0!==u&&u,v=e.children,h=e.activeFor,p=void 0===h?[]:h,b=Object(c.g)();if(p.length>0)t=p.find((function(e){return Object(c.e)(b.pathname,{path:e.path,exact:e.exact})}));else{var x=Object(c.e)(b.pathname,{path:m.split("?")[0]});t=x&&(!f||x.isExact)}var g="".concat(n," ").concat(t?s:i);return r.a.createElement(d.b,{className:g,to:m,exact:f?1:0},v)}var f=a(22),v={encode:function(e){return e?null:void 0},decode:function(e){return null===e}},h=a(20),p=function(){var e=Object(c.f)(),t=Object(c.g)(),a=Object(c.h)().listId,l=Object(n.useState)(null),i=Object(m.a)(l,2),d=i[0],p=i[1],b=Object(n.useState)(),x=Object(m.a)(b,2),g=x[0],E=x[1],y=Object(n.useState)(),N=Object(m.a)(y,2),w=N[0],j=N[1],O=Object(n.useState)(),C=Object(m.a)(O,2),R=C[0],k=C[1],S=Object(n.useState)(),L=Object(m.a)(S,2),z=L[0],T=L[1],B=Object(n.useState)(),D=Object(m.a)(B,2),J=D[0],M=D[1],A=Object(n.useState)(),I=Object(m.a)(A,2),V=I[0],W=I[1],F=Object(n.useState)(""),H=Object(m.a)(F,2),q=H[0],P=H[1],Y=Object(n.useState)(""),G=Object(m.a)(Y,2),K=G[0],Q=G[1],U=Object(f.b)("open",v),X=Object(m.a)(U,2),Z=X[0],$=X[1],_=a&&(null===g||void 0===g?void 0:g.find((function(e){return e.id===a})));Object(n.useEffect)((function(){var e=!0;p(null);var t=a?"/api/lists/".concat(a,"/reminders"):"/api/reminders";return fetch(t).then((function(e){return e.json()})).then((function(t){e&&p(t.reminders)})).catch((function(t){e&&(j("We couldn't load your reminders. Try again soon."),console.error(t))})),function(){e=!1}}),[a]),Object(n.useEffect)((function(){var e=!0;return Z&&fetch("/api/lists").then((function(e){return e.json()})).then((function(t){e&&E(t.lists)})).catch((function(e){console.error(e)})),function(){e=!1}}),[Z]);var ee=Object(n.useRef)(!1);return Object(n.useEffect)((function(){ee.current=!!d}),[d]),r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("div",{className:"flex mx-auto overflow-hidden rounded-md shadow-lg"},r.a.createElement(h.a,{initial:!1},Z&&r.a.createElement(h.b.div,{animate:{width:192},initial:{width:0},exit:{width:0},className:"flex flex-col bg-cool-gray-800"},r.a.createElement("div",{className:"flex flex-col flex-1 w-48 pt-12 pb-4 bg-cool-gray-800"},r.a.createElement("div",{className:"flex-1"},r.a.createElement("div",null,r.a.createElement(u,{className:"flex items-center justify-between px-6 py-2 text-sm font-medium",activeClassName:"bg-cool-gray-700 text-white",inactiveClassName:"text-cool-gray-400 hover:text-white",to:"/".concat(t.search),exact:!0},r.a.createElement("span",null,"All")),null===g||void 0===g?void 0:g.map((function(e){return r.a.createElement(u,{key:e.id,className:"flex items-center justify-between px-6 py-2 text-sm font-medium",activeClassName:"bg-cool-gray-700 text-white",inactiveClassName:"text-cool-gray-400 hover:text-white",to:"/".concat(e.id).concat(t.search)},r.a.createElement("span",null,e.name))}))),J&&r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),K&&(W(!0),fetch("/api/lists",{method:"POST",body:JSON.stringify({name:K})}).then((function(e){return e.json()})).then((function(a){Q(""),E((function(e){return[].concat(Object(o.a)(e),[a.list])})),M(!1),e.push("/".concat(a.list.id).concat(t.search))})).catch((function(){j("Your List wasn't saved. Try again.")})).finally((function(){W(!1)})))},className:"".concat(V?"opacity-50 pointer-events-none":"")},r.a.createElement("div",{className:"relative"},r.a.createElement("input",{autoFocus:!0,value:K,onChange:function(e){return Q(e.target.value)},className:"block w-full py-2 pl-6 text-sm font-medium text-white border-transparent rounded-none pr-9 focus:shadow-none form-input bg-cool-gray-700",type:"text",placeholder:"New list...","data-testid":"new-list-text"}),r.a.createElement("button",{className:"absolute inset-y-0 right-0 flex items-center px-3 text-cool-gray-400 hover:text-cool-gray-200","data-testid":"save-new-list"},r.a.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})))))),r.a.createElement("div",{className:"mt-10"},r.a.createElement("button",{onClick:function(){return M(!J)},className:"flex items-center mx-6 text-xs text-cool-gray-400 hover:text-white","data-testid":"add-list"},r.a.createElement("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd",fillRule:"evenodd"})),"Add list"))))),r.a.createElement("div",{className:"flex flex-1 bg-white w-md"},r.a.createElement("div",{className:"flex items-center w-12 group"},r.a.createElement("button",{onClick:function(){return $(!Z)},className:"hidden w-2 h-10 ml-2 rounded-full bg-cool-gray-200 hover:bg-cool-gray-300 group-hover:block","data-testid":"toggle-sidebar"})),r.a.createElement("div",{className:"flex-1 pt-12 pb-12 pr-12"},r.a.createElement("div",{className:"flex items-center justify-between mb-10"},r.a.createElement("h1",{className:"flex items-center justify-between text-3xl font-bold leading-none","data-testid":"active-list-title"},(null===_||void 0===_?void 0:_.name)||"Reminders"),r.a.createElement("button",{"data-testid":"add-reminder",onClick:function(){return k(!R)},className:"p-2 border border-transparent rounded hover:border-cool-gray-300 text-cool-gray-600"},r.a.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})))),r.a.createElement("div",null,w&&r.a.createElement("div",{className:"fixed bottom-0 right-0 mb-8 mr-8 bg-white border-b-4 border-red-500 rounded-md shadow-xl"},r.a.createElement("div",{className:"flex p-4 pr-5 rounded-md"},r.a.createElement("div",{className:"flex-shrink-0"},r.a.createElement("svg",{className:"w-5 h-5 mr-1 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))),r.a.createElement("div",{className:"ml-3"},r.a.createElement("h3",{className:"font-medium leading-5 text-red-600 text"},"Network error"),r.a.createElement("div",{className:"mt-2 text-sm leading-5"},r.a.createElement("p",null,w))))),(null===d||void 0===d?void 0:d.length)>0?r.a.createElement("div",null,r.a.createElement("ul",{className:"divide-y divide-cool-gray-100"},r.a.createElement(h.a,null,d.map((function(e,t){return r.a.createElement(h.b.li,{variants:{hidden:function(e){return{opacity:0,y:-50*e}},visible:function(e){return{opacity:1,y:0,transition:{delay:.025*e}}},removed:{opacity:0}},initial:ee.current?"visible":"hidden",animate:"visible",exit:"removed",custom:t,className:"flex items-center justify-between py-2 group",key:e.id,"data-testid":"reminder"},r.a.createElement("div",null,e.text,!a&&e.list&&r.a.createElement("span",{className:"px-2 py-1 ml-3 text-xs font-medium rounded bg-cool-gray-100 text-cool-gray-600","data-testid":"list-tag"},e.list.name)),r.a.createElement("button",{className:"flex items-center invisible px-2 py-1 opacity-50 hover:opacity-100 group-hover:visible",onClick:function(){return t=e.id,fetch("/api/reminders/".concat(t),{method:"DELETE"}),void p((function(e){return e.filter((function(e){return e.id!==t}))}));var t},"data-testid":"delete-reminder"},r.a.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd",fillRule:"evenodd"})),"\ufe0f"))}))))):d?r.a.createElement("p",{className:"pt-3 pb-3 font-medium text-cool-gray-400"},"All done!"):w?null:r.a.createElement("p",{className:"pt-3 pb-3 font-medium text-cool-gray-400"},"Loading..."),R&&r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q&&(T(!0),fetch("/api/reminders",{method:"POST",body:JSON.stringify(Object(s.a)({text:q},a&&{listId:a}))}).then((function(e){return e.json()})).then((function(e){P(""),p((function(t){return[].concat(Object(o.a)(t),[e.reminder])})),k(!1)})).catch((function(e){j("Your Reminder wasn't saved. Try again."),console.error(e)})).finally((function(){T(!1)})))},className:"-mx-3 ".concat(z?"opacity-50 pointer-events-none":"")},r.a.createElement("div",null,r.a.createElement("div",{className:"relative py-1"},r.a.createElement("input",{id:"email",autoFocus:!0,className:"block w-full py-2 transition duration-150 ease-in-out border-2 border-transparent focus form-input focus:shadow-none focus:border-blue-300 sm:leading-5",placeholder:"New reminder...","data-testid":"new-reminder-text",value:q,onChange:function(e){return P(e.target.value)}}),r.a.createElement("div",{className:"absolute inset-y-0 right-0 flex py-1"},r.a.createElement("button",{type:"submit","data-testid":"save-new-reminder",className:"items-center px-4 text-sm text-cool-gray-700 hover:text-cool-gray-400"},r.a.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},r.a.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})))))))),a&&r.a.createElement("div",{className:"mt-20 text-right"},r.a.createElement("button",{onClick:function(){fetch("/api/lists/".concat(a),{method:"DELETE"}),E((function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==a}))})),e.push("/".concat(t.search))},className:"px-2 text-sm font-medium text-cool-gray-400 hover:text-cool-gray-600","data-testid":"delete-list"},"Delete list"))))))};function b(){return r.a.createElement("div",{className:"p-12 bg-white rounded-md shadow-lg overflow-hidden max-w-md mx-auto"},r.a.createElement("h1",{className:"mb-4 text-3xl font-bold leading-none"},"About"),r.a.createElement("p",{className:"mt-6"},"This is the demo app for the"," ",r.a.createElement("a",{className:"underline",href:"https://miragejs.com/tutorial",style:{textDecorationColor:"#64748b"}},"Mirage JS Tutorial"),"."))}function x(){var e=Object(c.g)(),t=e.pathname.match("/about"),a=!t;return r.a.createElement("div",{className:"pt-12"},r.a.createElement("header",{className:"max-w-md mx-auto"},r.a.createElement("nav",{className:"mt-4 space-x-5"},r.a.createElement(u,{className:"pb-px font-medium text-sm ".concat(a?"text-cool-gray-900 border-b-2 border-cool-gray-600":"text-cool-gray-500 hover:text-cool-gray-900"),to:"/".concat(e.search)},"Reminders"),r.a.createElement(u,{className:"pb-px font-medium text-sm ".concat(t?"text-cool-gray-900 border-b-2 border-cool-gray-600":"text-cool-gray-500 hover:text-cool-gray-900"),to:"/about".concat(e.search)},"About"))),r.a.createElement("main",{className:"mt-10"},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/about"},r.a.createElement(b,null)),r.a.createElement(c.a,{path:"/:listId?",exact:!0},r.a.createElement(p,null)))))}var g=a(4);(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.environment,a=void 0===t?"development":t;Object(g.e)({environment:a,serializers:{reminder:g.c.extend({include:["list"],embed:!0})},models:{list:g.b.extend({reminders:Object(g.f)()}),reminder:g.b.extend({list:Object(g.d)()})},factories:{list:g.a.extend({name:function(e){return"List ".concat(e)},withReminders:Object(g.g)({afterCreate:function(e,t){e.reminders.length||t.createList("reminder",5,{list:e})}})}),reminder:g.a.extend({text:function(e){return"Reminder ".concat(e)}})},seeds:function(e){e.create("reminder",{text:"Walk the dog"}),e.create("reminder",{text:"Take out the trash"}),e.create("reminder",{text:"Work out"}),e.create("list",{name:"Home",reminders:[e.create("reminder",{text:"Do taxes"})]}),e.create("list",{name:"Work",reminders:[e.create("reminder",{text:"Visit bank"})]})},routes:function(){this.get("/api/lists",(function(e,t){return e.lists.all()})),this.get("/api/lists/:id/reminders",(function(e,t){return e.lists.find(t.params.id).reminders})),this.get("/api/reminders",(function(e){return e.reminders.all()})),this.post("/api/reminders",(function(e,t){var a=JSON.parse(t.requestBody);return e.reminders.create(a)})),this.post("/api/lists",(function(e,t){var a=JSON.parse(t.requestBody);return e.lists.create(a)})),this.delete("/api/reminders/:id",(function(e,t){var a=t.params.id;return e.reminders.find(a).destroy()})),this.delete("/api/lists/:id",(function(e,t){var a=t.params.id,n=e.lists.find(a);return n.reminders.destroy(),n.destroy()}))}})})(),i.a.render(r.a.createElement(d.a,null,r.a.createElement(f.a,{ReactRouterRoute:c.a},r.a.createElement(x,null))),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.a1e368d9.chunk.js.map